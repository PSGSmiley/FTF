#VRML_SIM R2021b utf8
# Prüfkörper: Pfosten
# template language: javascript

PROTO Pfosten [
  field SFVec3f    translation 0 0 0
  field SFRotation rotation    0 1 0 0
  field SFString   name        "pfosten"
  field SFVec3f    size_base   0.2 0.2 0.01
  field SFVec3f    size_pole   0.05 0.05 0.6
  field SFFloat    mass        10
  field SFNode     appearance  CorrodedMetal { textureTransform TextureTransform { scale 1 1 } }  # Defines the appearance of the wall.
]
{
  %<
    let size_base = fields.size_base.value;
    let size_pole = fields.size_pole.value;
  >%
  Solid {
    translation IS translation
    rotation IS rotation
    model "pfosten"
    children [
      DEF BASE Transform {
        translation 0 0 %<= 0.5 * size_base.z >% 
        children [
          Shape {
            appearance IS appearance
            geometry Box {
              size IS size_base
            }
          }
        ]
      }
      DEF POLE Transform {
        translation 0 0 %<= 0.5 * size_pole.z >% 
        children [
          Shape {
            appearance IS appearance
            geometry Box {
              size IS size_pole
            }
          }
        ]
      }
      
    ]
    name IS name
    boundingObject Group {
      children [
        USE BASE
        USE POLE
      ]
    }
    physics Physics {
          density -1
          mass IS mass
        }
  }
}
